{%extends 'base.html'%}
{%block title%}User Table{%endblock%}
{%block content%}

{%if users%}
<form method = "POST" action = "{{url_for('views.user_table')}}">
<body> 
    <h2> Users List</h2>
    <table style ="width:100%">
        <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Provide manager access</th>
            <th>Provide Admin access</th>
            <th>Edit</th>
            <th>Remove</th>
            <th>Assign a Manager</th>
        </tr>
        {% for user in users %}
        
        <tr>
            <td>{{ user.first_name }} {{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            <td><input type="checkbox" id="manager{{user.id}}" name="manager{{user.id}}" value="manager"><br></td>
            <td><input type="checkbox" id="superuser{{user.id}}" name="superuser{{user.id}}" value="superuser"><br></td>
            <td><a href="{{ url_for('views.edit_user', id=user.id) }}">Edit</a></td>
            <td><a href="{{url_for('views.delete_user', id = user.id)}}">Remove</a></td>
            

            {%if user.is_superuser == False %}
            <td><select name = 'mymanager{{user.id}}'>
                {%for m in available_managers%}
                <!-- mid={{m.id}}  umid={{user.manager_id}}-->
                <option value = "{{m.id}}" {%if m.id == user.manager_id %} selected ="selected" {%endif%}>
                    {{m.name}}
                </option>
                {%endfor%}
            </select></td>
            
            {%endif%}
        </tr>
        
        
        {% endfor %}
    </table>
   
    <input type = "submit" value = "Submit">
</body>
</div>
</form>
{%else%}
<h1> There are no users</h1>
{%endif%}
{%endblock%}