{%extends 'base.html'%}
{%block title%}User Table{%endblock%}
{%block content%}

{%if users%}
<form method = "POST" action = "{{url_for('views.user_table')}}">
<body> 
    <h2> Users List</h2>
    <table style ="width:100%">
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Provide manager access</th>
            <th>Provide Admin access</th>
            <!--<th>Edit</th>-->
            <th>Remove</th>
            <th>Assign a Manager</th>
        </tr>
        {% for user in users %}
        <br>
        
        <tr>
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            <!--Select field with values yes and no-->
            <td><select name="manager{{user.id}}">
            <option value="no"{%if not user.is_manager%} selected="selected"{%endif%}>No</option>
            <option value="yes"{%if user.is_manager%} selected="selected"{%endif%}>Yes</option>
            </select></td>
            <td><select name="superuser{{user.id}}">
                <option value="no"{%if not user.is_superuser%} selected="selected"{%endif%}>No</option>
                <option value="yes"{%if user.is_superuser%} selected="selected"{%endif%}>Yes</option>
            </select></td>

            <!--<td><a href="{{ url_for('views.edit_user', id=user.id) }}">Edit</a></td>-->
            <td><a href="{{url_for('views.delete_user', id = user.id)}}">Remove</a></td>
            
            <!--{%if user.is_superuser == False %}-->
            <td><select name = 'mymanager{{user.id}}'>
                <option value = "none">None</option>
                 {%for m in available_managers%}
                 <!--##mid={{m.id}}  umid={{user.manager_id}}-->
                 <option value = "{{m.id}}" {%if m.id == user.manager_id %} selected ="selected" {%endif%}>
                     {{m.first_name}} {{m.last_name}}
                 </option>
                 {%endfor%}
             </select></td>
             <!--{%endif%}-->

        </tr>
        
        {% endfor %} 
    </table>
    <div>
        <!--submit button--> 
    <input type = "submit" value = "Submit">
   </div>
</body>
</form>
   
{%else%}
<h1> There are no users</h1>
{%endif%}
{%endblock%}